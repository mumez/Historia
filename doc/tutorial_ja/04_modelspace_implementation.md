# モデルスペースの実装

## モデルスペース（集約）の定義

モデルスペースクラスは、スナップショットの保存やイベントの再生を含む、モデルのライフサイクルを管理する責任があります。ここでは、`HtBankAccount`モデルを管理するために`HtBankAccountSpace`を定義します。

```Smalltalk
HsModelSpace << #HtBankAccountSpace
    slots: {};
    package: 'Historia-Examples-SimpleBank'
```

- `HsModelSpace`は、モデルを管理するための基底クラスです。
- `slots`は、ModelSpace の追加属性や依存関係を定義するために使用できます。

### モデルスペースとは？

ModelSpace は、複数のモデルインスタンスを管理するためのコンテナとして機能します。以下の主要な機能を提供します：

- **集約**: モデルインスタンスを集約し、それらをまとめて管理できるようにします。
- **ライフサイクル管理**: モデルの作成、更新、削除を処理します。
- **イベント再生**: イベントを再生して、モデルの状態を特定の時点に復元できます。

各 ModelSpace は一意の`spaceId`によって識別され、複数の独立したスペースを作成して管理することができます。
